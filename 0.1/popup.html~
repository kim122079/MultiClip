<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <link rel='stylesheet' type='text/css' href='content.css' media='all' />
    <script language="javascript" type="text/javascript" src="jquery-1.3.2.js"></script>
    <script>

      function init() {
        
	var clippings = chrome.extension.getBackgroundPage().getClippings();	
        updateValues(clippings);
      }

      
      
      function updateValues(clippings) {
	if(clippings.clip1 == "")
		return;
        $("#clipList").innerHTML = "";      
	$("#clipList").append('<li id="clip1"><p>' + clippings.clip1 + '</p><a class="delete"><img src="removeButton.png" width="20" height="20"/></a></li>');
	$(".delete").mousedown(function(){
           var clipID = $(this).parent().attr("id");
	   $(this).parent().slideUp("fast",function(){
   	   	$(this).parent().remove();
    	   });
           chrome.extension.getBackgroundPage().setItem(clipID,"");
        });
      }

      function clearStorage() {
	      try {
	         chrome.extension.getBackgroundPage().flushStorage();
	      }catch(e) {
	        console.log("error while flushing local storage");
	        console.log(e);
	      }

	      $('#cl1').innerHTML = "";
	      $('#cl2').innerHTML = "";
      }

    </script>
  </head>
  <body onload='init()'>
      <div id="wrapper">
  	  <h1>Clipping Board</h1>
          <ul id="clipList">
          </ul>
	  <a onclick='clearStorage()'>flush clipboard!</a>
      </div>
  </body>
</html>
